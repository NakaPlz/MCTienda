(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,18566,(e,t,r)=>{t.exports=e.r(76562)},50965,e=>{"use strict";let t=(0,e.i(75254).default)("shopping-bag",[["path",{d:"M16 10a4 4 0 0 1-8 0",key:"1ltviw"}],["path",{d:"M3.103 6.034h17.794",key:"awc11p"}],["path",{d:"M3.4 5.467a2 2 0 0 0-.4 1.2V20a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V6.667a2 2 0 0 0-.4-1.2l-2-2.667A2 2 0 0 0 17 2H7a2 2 0 0 0-1.6.8z",key:"o988cm"}]]);e.s(["ShoppingBag",()=>t],50965)},19272,e=>{"use strict";var t=e.i(43476),r=e.i(22016),a=e.i(71645);let s=(0,e.i(75254).default)("image-off",[["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}],["path",{d:"M10.41 10.41a2 2 0 1 1-2.83-2.83",key:"1bzlo9"}],["line",{x1:"13.5",x2:"6",y1:"13.5",y2:"21",key:"1q0aeu"}],["line",{x1:"18",x2:"21",y1:"12",y2:"15",key:"5mozeu"}],["path",{d:"M3.59 3.59A1.99 1.99 0 0 0 3 5v14a2 2 0 0 0 2 2h14c.55 0 1.052-.22 1.41-.59",key:"mmje98"}],["path",{d:"M21 15V5a2 2 0 0 0-2-2H9",key:"43el77"}]]);function i({fallbackSrc:e="/placeholder.png",src:r,alt:i,className:n,...d}){let[o,l]=(0,a.useState)(!1);return o||!r?(0,t.jsx)("div",{className:`flex items-center justify-center bg-muted text-muted-foreground ${n}`,children:(0,t.jsxs)("div",{className:"flex flex-col items-center gap-2 text-xs p-2 text-center",children:[(0,t.jsx)(s,{className:"h-6 w-6 opacity-50"}),(0,t.jsx)("span",{children:"Sin imagen"})]})}):(0,t.jsx)("img",{src:r,alt:i,className:n,onError:()=>l(!0),...d})}function n({product:e}){let a=e.product_images?.[0]?.url;return(0,t.jsx)(r.default,{href:`/product?id=${e.id}`,className:"group block",children:(0,t.jsxs)("div",{className:"bg-card text-card-foreground rounded-lg shadow-sm border border-border overflow-hidden transition-all duration-300 hover:shadow-md hover:border-primary/50",children:[(0,t.jsxs)("div",{className:"relative aspect-square overflow-hidden bg-muted",children:[(0,t.jsx)(i,{src:a,alt:e.name,className:"object-cover w-full h-full transition-transform duration-500 group-hover:scale-105"}),(0,t.jsxs)("div",{className:"absolute top-3 right-3 flex flex-col gap-2",children:[e.is_new&&(0,t.jsx)("span",{className:"bg-emerald-500 text-white text-[10px] uppercase tracking-wider font-bold px-2 py-1 rounded",children:"Nuevo"}),e.is_on_sale&&(0,t.jsx)("span",{className:"bg-red-500 text-white text-[10px] uppercase tracking-wider font-bold px-2 py-1 rounded",children:"Oferta"})]})]}),(0,t.jsxs)("div",{className:"p-4",children:[(0,t.jsx)("div",{className:"mb-1 text-xs text-primary uppercase tracking-wider font-medium",children:e.categories?.name||"Varios"}),(0,t.jsx)("h3",{className:"font-medium text-base leading-tight mb-3 group-hover:text-primary transition-colors line-clamp-2",children:e.name}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[e.is_on_sale&&e.original_price&&(0,t.jsxs)("span",{className:"text-sm text-muted-foreground line-through",children:["$",e.original_price.toLocaleString("es-AR")]}),(0,t.jsxs)("span",{className:"font-bold text-lg",children:["$",e.price.toLocaleString("es-AR")]})]}),e.brands?.name&&(0,t.jsx)("div",{className:"mt-2 text-xs text-muted-foreground",children:e.brands.name})]})]})})}e.s(["ProductCard",()=>n],19272)},77887,e=>{"use strict";var t=e.i(43476),r=e.i(7471),a=e.i(71645);function s({images:e}){let[r,s]=(0,a.useState)(e[0]?.url||"/placeholder.png");return 0===e.length?(0,t.jsx)("div",{className:"aspect-square bg-muted rounded-lg flex items-center justify-center text-muted-foreground",children:"No Images"}):(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsx)("div",{className:"aspect-square bg-card rounded-lg border overflow-hidden",children:(0,t.jsx)("img",{src:r,alt:"Product details",className:"w-full h-full object-contain"})}),e.length>1&&(0,t.jsx)("div",{className:"flex gap-4 overflow-x-auto pb-2",children:e.map(e=>(0,t.jsx)("button",{onClick:()=>s(e.url),className:`relative h-20 w-20 flex-shrink-0 rounded-md border-2 overflow-hidden ${r===e.url?"border-primary":"border-transparent"}`,children:(0,t.jsx)("img",{src:e.url,alt:"Product thumbnail",className:"w-full h-full object-cover"})},e.id))})]})}var i=e.i(25194),n=e.i(50965),d=e.i(75254);let o=(0,d.default)("check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]),l=(0,d.default)("link",[["path",{d:"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71",key:"1cjeqo"}],["path",{d:"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71",key:"19qd67"}]]),c=(0,d.default)("phone",[["path",{d:"M13.832 16.568a1 1 0 0 0 1.213-.303l.355-.465A2 2 0 0 1 17 15h3a2 2 0 0 1 2 2v3a2 2 0 0 1-2 2A18 18 0 0 1 2 4a2 2 0 0 1 2-2h3a2 2 0 0 1 2 2v3a2 2 0 0 1-.8 1.6l-.468.351a1 1 0 0 0-.292 1.233 14 14 0 0 0 6.392 6.384",key:"9njp5v"}]]);function m({productName:e,productDescription:r}){let[s,i]=(0,a.useState)(!1);return(0,t.jsxs)("div",{className:"flex gap-2 mt-4",children:[(0,t.jsxs)("button",{onClick:()=>{let t=window.location.href,r=`\xa1Mir\xe1 este producto incre\xedble! ${e} - ${t}`;window.open(`https://wa.me/?text=${encodeURIComponent(r)}`,"_blank")},className:"flex-1 flex items-center justify-center gap-2 px-4 py-2 bg-green-600 text-white rounded-md hover:bg-green-700 transition-colors text-sm font-medium",children:[(0,t.jsx)(c,{className:"h-4 w-4"}),"Compartir"]}),(0,t.jsx)("button",{onClick:()=>{let e=window.location.href;navigator.clipboard.writeText(e),i(!0),setTimeout(()=>i(!1),2e3)},className:"flex-1 flex items-center justify-center gap-2 px-4 py-2 border rounded-md hover:bg-muted transition-colors text-sm font-medium",children:s?(0,t.jsx)(t.Fragment,{children:(0,t.jsx)("span",{className:"text-green-600",children:"¡Copiado!"})}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(l,{className:"h-4 w-4"}),"Copiar Link"]})})]})}function u({product:e}){let{addItem:r}=(0,i.useCart)(),s=e.product_variants||[],d=s.reduce((e,t)=>(e[t.type]||(e[t.type]=[]),e[t.type].push(t),e),{}),l=Object.keys(d),[c,u]=(0,a.useState)({}),[p,x]=(0,a.useState)(!1);return(0,t.jsxs)("div",{className:"flex flex-col h-full",children:[(0,t.jsxs)("div",{children:[(0,t.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[e.categories?.name&&(0,t.jsx)("span",{className:"text-sm text-primary font-medium px-2 py-0.5 bg-primary/10 rounded-full",children:e.categories.name}),e.brands?.name&&(0,t.jsx)("span",{className:"text-sm text-muted-foreground",children:e.brands.name})]}),(0,t.jsx)("h1",{className:"text-3xl md:text-4xl font-bold tracking-tight mb-4",children:e.name}),(0,t.jsxs)("div",{className:"text-2xl font-bold mb-6",children:["$",e.price.toLocaleString("es-AR")]}),(0,t.jsx)("div",{className:"prose prose-sm text-muted-foreground mb-8",children:(0,t.jsx)("p",{children:e.description})}),l.length>0&&(0,t.jsx)("div",{className:"space-y-6 mb-8",children:l.map(r=>(0,t.jsxs)("div",{children:[(0,t.jsx)("h3",{className:"text-sm font-medium mb-3",children:r}),(0,t.jsx)("div",{className:"flex flex-wrap gap-2",children:d[r].map(a=>{let i=((t,r)=>{if(!e.product_combinations||0===e.product_combinations.length)return!0;let a={...c,[t]:r.id},i={},n=!0;return Object.entries(a).forEach(([e,t])=>{if(!t)return;let r=s.find(e=>e.id===t);r?i[e]=r.value:n=!1}),!!n&&e.product_combinations.some(e=>{for(let[t,r]of Object.entries(i))if(e.attributes[t]!==r)return!1;return e.stock>0})})(r,a),n=c[r]===a.id;return(0,t.jsx)("button",{onClick:()=>{var e;return i&&(e=a.id,void u(t=>({...t,[r]:t[r]===e?"":e})))},disabled:!i,title:i?"":"Sin stock para esta combinación",className:`px-4 py-2 rounded-md border text-sm transition-all relative ${n?"border-primary bg-primary/10 text-primary ring-1 ring-primary font-medium":i?"hover:border-primary/50 hover:bg-muted/50":"opacity-40 cursor-not-allowed bg-muted text-muted-foreground line-through decoration-destructive/50"}`,children:a.value},a.id)})})]},r))}),(()=>{if(l.every(e=>c[e])&&e.product_combinations&&e.product_combinations.length>0){let r=e.product_combinations.find(e=>Object.entries(e.attributes).every(([e,t])=>{let r=c[e],a=s.find(e=>e.id===r);return a&&a.value===t}));if(r)return(0,t.jsx)("div",{className:`mb-6 p-3 rounded-md text-sm font-medium border ${r.stock>0?"bg-green-900/10 border-green-900/20 text-green-700 dark:text-green-400":"bg-red-900/10 border-red-900/20 text-red-700 dark:text-red-400"}`,children:r.stock>0?`Stock disponible: ${r.stock} unidades`:"Sin stock disponible para esta combinación"})}return null})()]}),(0,t.jsxs)("div",{className:"mt-auto pt-6 border-t",children:[(0,t.jsx)("button",{onClick:()=>{r(e,l.map(e=>{let t=c[e];return d[e].find(e=>e.id===t)}).filter(e=>!!e)),x(!0),setTimeout(()=>x(!1),2e3)},disabled:p,className:`w-full btn btn-primary py-4 text-lg gap-2 ${p?"bg-green-600 hover:bg-green-700":""}`,children:p?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(o,{className:"h-5 w-5"}),"Agregado a Consultas"]}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(n.ShoppingBag,{className:"h-5 w-5"}),"Agregar a Consultas"]})}),(0,t.jsx)("p",{className:"text-xs text-muted-foreground text-center mt-3",children:"Agregar este producto a tu lista de consulta no implica compromiso de compra."}),(0,t.jsx)(m,{productName:e.name})]})]})}var p=e.i(18566),x=e.i(19272);function g({categoryId:e,currentProductId:s}){let[i,n]=(0,a.useState)([]),[d,o]=(0,a.useState)(!0);return((0,a.useEffect)(()=>{!async function(){if(!e)return;let{data:t}=await r.supabase.from("products").select(`
                    *,
                    categories (id, name),
                    brands (id, name),
                    product_images (url, display_order)
                `).eq("category_id",e).neq("id",s).eq("active",!0).limit(4);t&&n(t),o(!1)}()},[e,s]),d||0===i.length)?null:(0,t.jsxs)("div",{className:"mt-16 border-t pt-10",children:[(0,t.jsx)("h2",{className:"text-2xl font-bold mb-6 text-primary",children:"Productos Relacionados"}),(0,t.jsx)("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-4 gap-6",children:i.map(e=>(0,t.jsx)(x.ProductCard,{product:e},e.id))})]})}function h(){let e=(0,p.useSearchParams)().get("id"),[i,n]=(0,a.useState)(null),[d,o]=(0,a.useState)(!0);return((0,a.useEffect)(()=>{!async function(){if(!e)return;let{data:t,error:a}=await r.supabase.from("products").select(`
          *,
          categories (name),
          brands (name),
          product_images (id, url, display_order),
          product_variants (id, type, value, stock),
          product_combinations (id, attributes, stock)
        `).eq("id",e).single();!a&&t&&n(t),o(!1)}()},[e]),d)?(0,t.jsx)("div",{className:"container py-20 text-center",children:"Cargando producto..."}):i?(0,t.jsxs)("div",{className:"container py-10",children:[(0,t.jsxs)("div",{className:"grid md:grid-cols-2 gap-8 lg:gap-12",children:[(0,t.jsx)(s,{images:i.product_images||[]}),(0,t.jsx)(u,{product:i})]}),i.category_id&&(0,t.jsx)(g,{categoryId:i.category_id,currentProductId:i.id}),(0,t.jsx)("script",{type:"application/ld+json",dangerouslySetInnerHTML:{__html:JSON.stringify({"@context":"https://schema.org/","@type":"Product",name:i.name,image:i.product_images?.[0]?.url?[i.product_images[0].url]:[],description:i.description||`Compr\xe1 ${i.name} en Cat\xe1logo Muy Criollo`,brand:{"@type":"Brand",name:i.brands?.name||"Muy Criollo"},offers:{"@type":"Offer",url:window.location.href,priceCurrency:"ARS",price:i.price,availability:i.stock>0?"https://schema.org/InStock":"https://schema.org/OutOfStock"}})}})]}):(0,t.jsx)("div",{className:"container py-20 text-center text-muted-foreground",children:"Producto no encontrado"})}e.s(["default",()=>h],77887)},78468,e=>{e.n(e.i(77887))}]);